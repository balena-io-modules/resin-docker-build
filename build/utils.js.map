{"version":3,"sources":["../src/utils.ts"],"names":[],"mappings":";AACA;;;;;;;;;GASG;AACU,QAAA,YAAY,GAAG,CAAC,OAAe;IAC3C,MAAM,OAAO,GAAG,mBAAmB,CAAC,OAAO,CAAC,CAAA;IAC5C,EAAE,CAAC,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC;QAC3B,MAAM,QAAQ,GAAG,0BAA0B,CAAA;QAC3C,MAAM,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QACpC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;QAChB,CAAC;IACF,CAAC;IAED,MAAM,CAAA;AACP,CAAC,CAAA;AAED,MAAM,mBAAmB,GAAG,CAAC,OAAe;IAC3C,MAAM,SAAS,GAAG,gBAAgB,CAAA;IAClC,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IACrC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACX,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;IAChB,CAAC;IAAC,IAAI,CAAC,CAAC;QACP,MAAM,CAAA;IACP,CAAC;AACF,CAAC,CAAA","file":"utils.js","sourcesContent":["\n/**\n * Given a docker 'arrow message' containing a sha representing\n * a layer, extract the sha digest. If the string passed in is not\n * an arrow message, undefined will be returned.\n *\n * @param {string} message\n *\tThe build message to parse\n * @returns {string}\n *\tEither the sha string, or undefined\n */\nexport const extractLayer = (message: string): string | undefined => {\n\tconst extract = extractArrowMessage(message)\n\tif (extract !== undefined) {\n\t\tconst shaRegex = /([a-f0-9]{12}[a-f0-9]*)/g\n\t\tconst match = shaRegex.exec(extract)\n\t\tif (match) {\n\t\t\treturn match[1]\n\t\t}\n\t}\n\n\treturn\n}\n\nconst extractArrowMessage = (message: string): string | undefined => {\n\tconst arrowTest = /^\\s*-+>\\s*(.+)/\n\tconst match = arrowTest.exec(message)\n\tif (match) {\n\t\treturn match[1]\n\t} else {\n\t\treturn\n\t}\n}\n"],"sourceRoot":"src"}